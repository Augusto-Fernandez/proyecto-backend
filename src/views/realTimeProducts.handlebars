<div>
    <h1>Products</h1>
    <div id='products'></div>
    <form id="deleteProduct">
        <label>Ingresar id de producto a eliminar: </label>
        <input type="text" id="id"/>
        <button type="submit">Enviar</button>
    </form>
</div>
<script src='/socket.io/socket.io.js'></script>
<script>
    const socket = io();

    const productsHtml = document.getElementById('products');
    const deleteForm = document.getElementById('deleteProduct');

    const makeHtmlProductList = (products) => {
        if(products.length === 0){
            return `<div>There is no products yet</div>`;
        }else{
            return products.map((product) => {
            return `<div>
                        <p>Product Id: ${product.id}</p>
                        <p>Product Title: ${product.title}</p>
                        <p>Product Price: ${product.price}</p>
                    </div>`;
            }).join(' ');
        }
    }

    socket.on('listProducts', (data) => {
        let html = makeHtmlProductList(data);
        productsHtml.innerHTML = html;
    });

    deleteForm.addEventListener('submit', function (e) {
        e.preventDefault();
        const deleteInput = document.getElementById("id").value;
        socket.emit('delete_event', deleteInput);
    });
</script>